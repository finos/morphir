// WASI HTTP - simplified version for testing
package wasi:http@0.2.0;

interface types {
    // Method variant represents HTTP methods
    variant method {
        get,
        head,
        post,
        put,
        delete,
        connect,
        options,
        trace,
        patch,
        other(string),
    }

    // Scheme variant represents URL schemes
    variant scheme {
        http,
        https,
        other(string),
    }

    // Error codes for HTTP operations
    enum error-code {
        dns-timeout,
        dns-error,
        connection-timeout,
        connection-refused,
        connection-reset,
        http-request-denied,
        http-request-header-size,
        http-request-body-size,
    }

    // HTTP header fields
    record header-field {
        name: string,
        value: string,
    }

    // Fields resource for managing headers
    resource fields {
        constructor();
        get: func(name: string) -> list<string>;
        set: func(name: string, value: list<string>);
        delete: func(name: string);
        append: func(name: string, value: string);
        entries: func() -> list<header-field>;
    }

    // Request resource
    resource request {
        constructor();
        method: func() -> method;
        set-method: func(method: method);
        scheme: func() -> option<scheme>;
        set-scheme: func(scheme: option<scheme>);
        authority: func() -> option<string>;
        set-authority: func(authority: option<string>);
        path-with-query: func() -> option<string>;
        set-path-with-query: func(path-with-query: option<string>);
        headers: func() -> fields;
    }

    // Response resource
    resource response {
        constructor();
        status-code: func() -> u16;
        set-status-code: func(status-code: u16);
        headers: func() -> fields;
    }

    // Body resource for request/response bodies
    resource body {
        %stream: func() -> u32;
        %write: func() -> u32;
    }
}

world http-proxy {
    import types;
}
